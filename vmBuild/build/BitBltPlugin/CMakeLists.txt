message("Adding internal plugin: BitBltPlugin")
set(pluginName "BitBltPlugin")
set(pluginSrc "${srcPluginsDir}/BitBltPlugin")
set(pluginCross "${crossDir}/plugins/BitBltPlugin")
set(pluginPlatform "${targetPlatform}/plugins/BitBltPlugin")
set(LINKLIBS )
add_definitions(-DSQUEAK_BUILTIN_PLUGIN)
list(APPEND sources  "${pluginSrc}/BitBltPlugin.c")
include_directories(${pluginSrc} ${pluginCross} ${targetPlatform}/plugins/${pluginName})
include_directories(${pluginCross})
set(can_use_assembler TRUE)
enable_language(ASM)
set(CMAKE_ASM_COMPILE_OBJECT "asasm -cpu 6 -I ${pluginCross} -o <OBJECT> <SOURCE>")
list(APPEND sources  "${pluginCross}/BitBltArm.c" "${pluginCross}/BitBltArmSimd.c" "${pluginCross}/BitBltDispatch.c" "${pluginCross}/BitBltGeneric.c" "${pluginCross}/BitBltArmLinux.c" "${pluginCross}/BitBltArmSimdAlphaBlend.s" "${pluginCross}/BitBltArmSimdBitLogical.s" "${pluginCross}/BitBltArmSimdPixPaint.s" "${pluginCross}/BitBltArmSimdSourceWord.s")
add_library(BitBltPlugin STATIC ${sources})
set(linkFlags "${linkFlags}")
set_property(TARGET BitBltPlugin PROPERTY LINK_FLAGS "${linkFlags}")
IF (BitBltPlugin_dependencies)
add_dependencies(BitBltPlugin ${BitBltPlugin_dependencies})
ENDIF (BitBltPlugin_dependencies)
